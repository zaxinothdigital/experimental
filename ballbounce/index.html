<svg width="500" height="500">
    <circle id="output" r="20" cx="500" cy="500">
</svg>

<script>
    if ('Accelerometer' in window) {
        // Check if the browser supports the Accelerometer API
        
        navigator.permissions.query({ name: 'accelerometer' })
            .then(result => {
                if (result.state === 'granted') {
                    // Permission already granted, use the accelerometer
                    useAccelerometer();
                } else if (result.state === 'prompt') {
                    // Request permission from the user
                    navigator.permissions.request({ name: 'accelerometer' })
                        .then(permissionResult => {
                            if (permissionResult.state === 'granted') {
                                // Permission granted, use the accelerometer
                                useAccelerometer();
                            } else {
                                // Permission denied, handle accordingly
                                console.log('Accelerometer permission denied.');
                            }
                        });
                } else {
                    // Permission denied, handle accordingly
                    console.log('Accelerometer permission denied.');
                }
        })
        .catch(error => {
            // Error handling
            console.error('Error requesting accelerometer permission:', error);
        });
    } else {
        // Accelerometer API not supported
        console.log('Accelerometer not supported by this browser.');
    }

    console.log(document.querySelector('#output'));
    function useAccelerometer() {
        // Access the accelerometer data here
        const accelerometer = new Accelerometer({ frequency: 30 });
        accelerometer.addEventListener('reading', () => {
            var circle = document.querySelector('#output');
            circle.setAttribute('r', Math.abs((accelerometer.y + 9.8 * 3) / 9.8) * 10);
            circle.setAttribute('cx', (accelerometer.x / 9.8) * 50 + 250);
            circle.setAttribute('cy', (accelerometer.z / 9.8) * 50 + 250);
            console.log(accelerometer.x, accelerometer.y, accelerometer.z);
        });
        accelerometer.start();
    }
</script>
